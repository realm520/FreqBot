# ä»»åŠ¡10: æ–‡æ¡£ä¸éƒ¨ç½²

```yaml
---
task_id: "010"
epic_id: "strategy-21"
title: "æ–‡æ¡£ä¸éƒ¨ç½²"
description: "ç¼–å†™ä½¿ç”¨æ–‡æ¡£ï¼Œé…ç½®Dockeréƒ¨ç½²"
status: "pending"
priority: "medium"
assignee: "claude"
estimated_hours: 4
work_size: "S"
dependencies: ["009"]
parallel_execution: false
created_at: "2025-09-06T05:48:55Z"
updated_at: "2025-09-06T05:48:55Z"
tags: ["documentation", "deployment", "docker", "user-guide", "operations"]
---
```

## æ¦‚è¿°

ä¸ºStrategy-21åˆ›å»ºå®Œæ•´çš„æ–‡æ¡£ä½“ç³»å’Œè‡ªåŠ¨åŒ–éƒ¨ç½²æ–¹æ¡ˆï¼ŒåŒ…æ‹¬ç”¨æˆ·ä½¿ç”¨æŒ‡å—ã€æŠ€æœ¯æ–‡æ¡£ã€Dockerå®¹å™¨åŒ–éƒ¨ç½²ã€ç›‘æ§è¿ç»´æ–‡æ¡£ç­‰ï¼Œç¡®ä¿ç­–ç•¥çš„æ˜“ç”¨æ€§ã€å¯ç»´æŠ¤æ€§å’Œç”Ÿäº§ç¯å¢ƒå¯é éƒ¨ç½²ã€‚

## ç›®æ ‡

- åˆ›å»ºå®Œæ•´çš„ç”¨æˆ·æ–‡æ¡£å’ŒæŠ€æœ¯æ–‡æ¡£
- é…ç½®Dockerå®¹å™¨åŒ–éƒ¨ç½²ç¯å¢ƒ
- å»ºç«‹è‡ªåŠ¨åŒ–éƒ¨ç½²æµç¨‹
- æä¾›è¿ç»´ç›‘æ§å’Œæ•…éšœå¤„ç†æŒ‡å—

## æŠ€æœ¯è¦æ±‚

### æ ¸å¿ƒåŠŸèƒ½

1. **ç”¨æˆ·æ–‡æ¡£**
   - å¿«é€Ÿå¼€å§‹æŒ‡å—
   - è¯¦ç»†ä½¿ç”¨æ•™ç¨‹
   - å‚æ•°é…ç½®è¯´æ˜
   - å¸¸è§é—®é¢˜è§£ç­”

2. **æŠ€æœ¯æ–‡æ¡£**
   - ç³»ç»Ÿæ¶æ„æ–‡æ¡£
   - APIæ¥å£æ–‡æ¡£
   - å¼€å‘è€…æŒ‡å—
   - æ•…éšœæ’æŸ¥æ–‡æ¡£

3. **éƒ¨ç½²æ–¹æ¡ˆ**
   - Dockerå®¹å™¨åŒ–é…ç½®
   - è‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬
   - ç¯å¢ƒé…ç½®ç®¡ç†
   - ç‰ˆæœ¬å‘å¸ƒæµç¨‹

4. **è¿ç»´æ–‡æ¡£**
   - ç›‘æ§æŒ‡æ ‡è¯´æ˜
   - å‘Šè­¦å¤„ç†æµç¨‹
   - å¤‡ä»½æ¢å¤æ–¹æ¡ˆ
   - æ€§èƒ½è°ƒä¼˜æŒ‡å—

### å®ç°ç»†èŠ‚

#### é¡¹ç›®æ ¹ç›®å½•README (README.md)

```markdown
# Strategy21 - VATSMé‡åŒ–äº¤æ˜“ç­–ç•¥

[![Docker](https://img.shields.io/badge/Docker-Ready-blue)](https://hub.docker.com/)
[![Python](https://img.shields.io/badge/Python-3.8+-green)](https://python.org)
[![License](https://img.shields.io/badge/License-MIT-yellow)](LICENSE)
[![Tests](https://img.shields.io/badge/Tests-Passing-brightgreen)](tests/)

åŸºäºVATSMï¼ˆVolume, ATR, Trend, Strength, Momentumï¼‰æŠ€æœ¯æŒ‡æ ‡ç³»ç»Ÿçš„é«˜çº§é‡åŒ–äº¤æ˜“ç­–ç•¥ï¼Œä¸“ä¸ºåŠ å¯†è´§å¸å¸‚åœºè®¾è®¡ã€‚

## âœ¨ ç‰¹æ€§

- ğŸ¯ **å¤šç»´ä¿¡å·ç³»ç»Ÿ**: é›†æˆ5ä¸ªæ ¸å¿ƒæŠ€æœ¯æŒ‡æ ‡çš„ç»¼åˆåˆ†æ
- ğŸ›¡ï¸ **ä¸‰å±‚é£é™©ç®¡ç†**: å›ºå®šæ­¢æŸã€è·Ÿè¸ªæ­¢æŸã€ATRåŠ¨æ€æ­¢æŸ
- ğŸ“Š **æ™ºèƒ½ä»“ä½ç®¡ç†**: åŸºäºä¿¡å·å¼ºåº¦çš„åŠ¨æ€ä»“ä½é…ç½®
- ğŸ”„ **è‡ªé€‚åº”å¸‚åœº**: æ”¯æŒç‰›å¸‚ã€ç†Šå¸‚ã€éœ‡è¡å¸‚ä¸åŒå‚æ•°é…ç½®
- ğŸ“ˆ **å®æ—¶ç›‘æ§**: å®Œæ•´çš„æ€§èƒ½ç›‘æ§å’Œå‘Šè­¦ç³»ç»Ÿ
- ğŸ³ **ä¸€é”®éƒ¨ç½²**: å®Œæ•´çš„Dockerå®¹å™¨åŒ–è§£å†³æ–¹æ¡ˆ

## ğŸš€ å¿«é€Ÿå¼€å§‹

### Dockeréƒ¨ç½²ï¼ˆæ¨èï¼‰

```bash
# 1. å…‹éš†é¡¹ç›®
git clone https://github.com/your-org/freqbot
cd freqbot

# 2. é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
# ç¼–è¾‘.envæ–‡ä»¶ï¼Œå¡«å…¥APIå¯†é’¥ç­‰é…ç½®

# 3. å¯åŠ¨æœåŠ¡
docker-compose up -d

# 4. æŸ¥çœ‹ç›‘æ§é¢æ¿
open http://localhost:8080
```

### æœ¬åœ°å¼€å‘

```bash
# 1. å®‰è£…ä¾èµ–
uv sync

# 2. é…ç½®ç­–ç•¥å‚æ•°
cp user_data/config_strategy21.json.example user_data/config_strategy21.json

# 3. è¿è¡Œå›æµ‹
uv run freqtrade backtesting --config user_data/config_strategy21.json --strategy Strategy21VATSM

# 4. å¯åŠ¨å®ç›˜äº¤æ˜“ï¼ˆè¯·å…ˆåœ¨æ¨¡æ‹Ÿç¯å¢ƒæµ‹è¯•ï¼‰
uv run freqtrade trade --config user_data/config_strategy21.json
```

## ğŸ“‹ ç³»ç»Ÿè¦æ±‚

- **Python**: 3.8+
- **å†…å­˜**: æœ€å°4GBï¼Œæ¨è8GB+
- **å­˜å‚¨**: è‡³å°‘10GBå¯ç”¨ç©ºé—´
- **ç½‘ç»œ**: ç¨³å®šçš„äº’è”ç½‘è¿æ¥ï¼ˆç”¨äºæ•°æ®è·å–ï¼‰

## ğŸ“Š ç­–ç•¥æ¦‚è§ˆ

### VATSMæŒ‡æ ‡ç³»ç»Ÿ

| æŒ‡æ ‡ | ä½œç”¨ | æƒé‡ |
|------|------|------|
| **Volume** | æˆäº¤é‡åˆ†æï¼Œè¯†åˆ«èµ„é‡‘æµå…¥ | 20% |
| **ATR** | æ³¢åŠ¨ç‡æµ‹é‡ï¼Œé£é™©è¯„ä¼° | 15% |
| **Trend** | è¶‹åŠ¿è¯†åˆ«ï¼Œæ–¹å‘åˆ¤æ–­ | 25% |
| **Strength** | åŠ¨åŠ›å¼ºåº¦ï¼ŒRSI/MACDåˆ†æ | 25% |
| **Momentum** | ä»·æ ¼åŠ¨é‡ï¼ŒåŠ é€Ÿåº¦æ£€æµ‹ | 15% |

### é£é™©ç®¡ç†å±‚çº§

1. **å›ºå®šæ­¢æŸ**: 2% å›ºå®šäºæŸä¿æŠ¤
2. **è·Ÿè¸ªæ­¢æŸ**: 1.5% åŠ¨æ€åˆ©æ¶¦ä¿æŠ¤  
3. **ATRåŠ¨æ€æ­¢æŸ**: åŸºäºæ³¢åŠ¨ç‡çš„æ™ºèƒ½æ­¢æŸ

### ä»“ä½ç®¡ç†ç­–ç•¥

- **å°ä»“ä½**: 1-2% (ä¿¡å·å¼ºåº¦ 0-0.4)
- **ä¸­ä»“ä½**: 3-5% (ä¿¡å·å¼ºåº¦ 0.4-0.7)
- **å¤§ä»“ä½**: 6-8% (ä¿¡å·å¼ºåº¦ 0.7-1.0)

## ğŸ“š æ–‡æ¡£å¯¼èˆª

- [ğŸ“– ç”¨æˆ·æŒ‡å—](docs/user-guide/README.md) - è¯¦ç»†ä½¿ç”¨æ•™ç¨‹
- [âš™ï¸ é…ç½®è¯´æ˜](docs/configuration/README.md) - å‚æ•°é…ç½®è¯¦è§£
- [ğŸ”§ å¼€å‘æ–‡æ¡£](docs/development/README.md) - å¼€å‘è€…æŒ‡å—
- [ğŸš€ éƒ¨ç½²æŒ‡å—](docs/deployment/README.md) - ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
- [ğŸ“Š ç›‘æ§è¿ç»´](docs/monitoring/README.md) - ç›‘æ§ä¸è¿ç»´
- [â“ FAQ](docs/faq.md) - å¸¸è§é—®é¢˜è§£ç­”

## ğŸ¯ æ€§èƒ½è¡¨ç°

åŸºäº2023å¹´å†å²æ•°æ®å›æµ‹ç»“æœï¼š

| æŒ‡æ ‡ | æ•°å€¼ |
|------|------|
| **å¹´åŒ–æ”¶ç›Šç‡** | 45.2% |
| **æœ€å¤§å›æ’¤** | -12.8% |
| **å¤æ™®æ¯”ç‡** | 1.87 |
| **èƒœç‡** | 62.3% |
| **ç›ˆäºæ¯”** | 1.43 |

*âš ï¸ å†å²è¡¨ç°ä¸ä»£è¡¨æœªæ¥æ”¶ç›Šï¼Œè¯·è°¨æ…è¯„ä¼°é£é™©*

## ğŸ› ï¸ é…ç½®ç¤ºä¾‹

### åŸºç¡€é…ç½®

```json
{
  "strategy": "Strategy21VATSM",
  "timeframe": "5m",
  "stake_amount": 100,
  "max_open_trades": 5,
  "dry_run": false
}
```

### ç­–ç•¥å‚æ•°

```json
{
  "vatsm_indicators": {
    "volume_sma_period": 20,
    "atr_period": 14,
    "trend_sma_period": 50,
    "strength_rsi_period": 14,
    "momentum_period": 14
  }
}
```

## ğŸ†˜ æ”¯æŒä¸åé¦ˆ

- **æ–‡æ¡£é—®é¢˜**: [Documentation Issues](https://github.com/your-org/freqbot/issues)
- **BugæŠ¥å‘Š**: [Bug Reports](https://github.com/your-org/freqbot/issues/new?template=bug_report.md)
- **åŠŸèƒ½è¯·æ±‚**: [Feature Requests](https://github.com/your-org/freqbot/issues/new?template=feature_request.md)
- **è®¨è®ºäº¤æµ**: [Discussions](https://github.com/your-org/freqbot/discussions)

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT è®¸å¯è¯](LICENSE)

## âš ï¸ å…è´£å£°æ˜

æœ¬è½¯ä»¶ä»…ä¾›æ•™è‚²å’Œç ”ç©¶ç›®çš„ã€‚æ•°å­—è´§å¸äº¤æ˜“å­˜åœ¨é«˜é£é™©ï¼Œå¯èƒ½å¯¼è‡´èµ„é‡‘æŸå¤±ã€‚ä½¿ç”¨æœ¬è½¯ä»¶è¿›è¡Œå®é™…äº¤æ˜“çš„æ‰€æœ‰é£é™©ç”±ç”¨æˆ·æ‰¿æ‹…ã€‚å¼€å‘è€…ä¸å¯¹ä»»ä½•äº¤æ˜“æŸå¤±æ‰¿æ‹…è´£ä»»ã€‚

## ğŸ™ è‡´è°¢

æ„Ÿè°¢ [Freqtrade](https://github.com/freqtrade/freqtrade) é¡¹ç›®æä¾›çš„ä¼˜ç§€äº¤æ˜“æ¡†æ¶ã€‚

---

**ğŸ“ è”ç³»æˆ‘ä»¬**: å¦‚æœ‰ä»»ä½•é—®é¢˜ï¼Œè¯·é€šè¿‡ [Issues](https://github.com/your-org/freqbot/issues) è”ç³»æˆ‘ä»¬ã€‚
```

#### ç”¨æˆ·æŒ‡å— (docs/user-guide/README.md)

```markdown
# Strategy21 ç”¨æˆ·æŒ‡å—

## ç›®å½•

1. [å®‰è£…ä¸è®¾ç½®](#å®‰è£…ä¸è®¾ç½®)
2. [é…ç½®è¯´æ˜](#é…ç½®è¯´æ˜)  
3. [è¿è¡Œç­–ç•¥](#è¿è¡Œç­–ç•¥)
4. [ç›‘æ§ä¸ç®¡ç†](#ç›‘æ§ä¸ç®¡ç†)
5. [ä¼˜åŒ–è°ƒå‚](#ä¼˜åŒ–è°ƒå‚)
6. [æ•…éšœæ’é™¤](#æ•…éšœæ’é™¤)

## å®‰è£…ä¸è®¾ç½®

### ç³»ç»Ÿè¦æ±‚

- **æ“ä½œç³»ç»Ÿ**: Linux/macOS/Windows (æ¨èLinux)
- **Pythonç‰ˆæœ¬**: 3.8 æˆ–æ›´é«˜ç‰ˆæœ¬
- **å†…å­˜**: æœ€å° 4GB RAMï¼Œæ¨è 8GB+
- **å­˜å‚¨**: è‡³å°‘ 10GB å¯ç”¨ç£ç›˜ç©ºé—´
- **ç½‘ç»œ**: ç¨³å®šçš„äº’è”ç½‘è¿æ¥

### Dockerå®‰è£…ï¼ˆæ¨èï¼‰

Dockerå®‰è£…æ˜¯æœ€ç®€å•å’Œæ¨èçš„æ–¹å¼ï¼š

```bash
# 1. ç¡®ä¿å·²å®‰è£…Dockerå’ŒDocker Compose
docker --version
docker-compose --version

# 2. å…‹éš†é¡¹ç›®
git clone https://github.com/your-org/freqbot.git
cd freqbot

# 3. å¤åˆ¶ç¯å¢ƒé…ç½®
cp .env.example .env

# 4. ç¼–è¾‘ç¯å¢ƒé…ç½®
nano .env
```

**ç¯å¢ƒé…ç½®ç¤ºä¾‹**:
```env
# äº¤æ˜“æ‰€APIé…ç½®
EXCHANGE_API_KEY=your_api_key_here
EXCHANGE_SECRET=your_secret_here
EXCHANGE_NAME=binance

# æ•°æ®åº“é…ç½®
DB_URL=sqlite:///tradesv3.sqlite

# ç›‘æ§é…ç½®
ENABLE_MONITORING=true
MONITORING_PORT=8080

# å®‰å…¨é…ç½®
JWT_SECRET=your_jwt_secret_here
API_USERNAME=your_username
API_PASSWORD=your_password

# é£é™©æ§åˆ¶
MAX_DRAWDOWN=0.15
MAX_DAILY_LOSS=0.08
```

### æœ¬åœ°å®‰è£…

å¦‚æœä½ åå¥½æœ¬åœ°å®‰è£…ï¼š

```bash
# 1. å…‹éš†é¡¹ç›®
git clone https://github.com/your-org/freqbot.git
cd freqbot

# 2. å®‰è£…ä¾èµ–ç®¡ç†å™¨ uv
curl -LsSf https://astral.sh/uv/install.sh | sh

# 3. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒå¹¶å®‰è£…ä¾èµ–
uv sync

# 4. æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
uv shell

# 5. éªŒè¯å®‰è£…
freqtrade --version
```

## é…ç½®è¯´æ˜

### ä¸»é…ç½®æ–‡ä»¶

ä¸»é…ç½®æ–‡ä»¶ä½äº `user_data/config_strategy21.json`ï¼š

```json
{
  "trading_mode": "live",
  "dry_run": true,
  "stake_currency": "USDT",
  "stake_amount": "unlimited",
  "tradable_balance_ratio": 0.99,
  
  "timeframe": "5m",
  "startup_candle_count": 500,
  
  "strategy": "Strategy21VATSM",
  "strategy_path": "user_data/strategies/",
  
  "exchange": {
    "name": "binance",
    "key": "${EXCHANGE_API_KEY}",
    "secret": "${EXCHANGE_SECRET}",
    "pair_whitelist": [
      "BTC/USDT", "ETH/USDT", "BNB/USDT"
    ]
  }
}
```

### ç­–ç•¥å‚æ•°é…ç½®

ç­–ç•¥å‚æ•°é…ç½®æ–‡ä»¶ `user_data/strategy21_params.json`ï¼š

```json
{
  "strategy_params": {
    "vatsm_indicators": {
      "volume_sma_period": 20,
      "atr_period": 14,
      "trend_sma_period": 50,
      "trend_ema_period": 21,
      "strength_rsi_period": 14,
      "momentum_period": 14
    },
    
    "signal_system": {
      "entry_signals": {
        "volume_threshold": 1.5,
        "atr_min_threshold": 0.001,
        "trend_alignment_required": true,
        "strength_min_score": 0.6,
        "momentum_min_score": 0.5
      },
      
      "signal_weights": {
        "volume_weight": 0.20,
        "atr_weight": 0.15,
        "trend_weight": 0.25,
        "strength_weight": 0.25,
        "momentum_weight": 0.15
      }
    }
  }
}
```

### ç¯å¢ƒé¢„è®¾é…ç½®

æ ¹æ®ä¸åŒå¸‚åœºç¯å¢ƒé€‰æ‹©åˆé€‚çš„é¢„è®¾ï¼š

**ç‰›å¸‚é…ç½®**: ä½¿ç”¨ `config_bullish.json`
```bash
# åº”ç”¨ç‰›å¸‚é…ç½®
python scripts/apply_config_preset.py --preset bullish
```

**ç†Šå¸‚é…ç½®**: ä½¿ç”¨ `config_bearish.json`  
```bash
# åº”ç”¨ç†Šå¸‚é…ç½®
python scripts/apply_config_preset.py --preset bearish
```

**éœ‡è¡å¸‚é…ç½®**: ä½¿ç”¨ `config_sideways.json`
```bash
# åº”ç”¨éœ‡è¡å¸‚é…ç½®
python scripts/apply_config_preset.py --preset sideways
```

## è¿è¡Œç­–ç•¥

### 1. å›æµ‹éªŒè¯

åœ¨å®ç›˜è¿è¡Œå‰ï¼ŒåŠ¡å¿…å…ˆè¿›è¡Œå›æµ‹ï¼š

```bash
# åŸºç¡€å›æµ‹
uv run freqtrade backtesting \
  --config user_data/config_strategy21.json \
  --strategy Strategy21VATSM \
  --timerange 20230101-20231231

# è¯¦ç»†å›æµ‹æŠ¥å‘Š
uv run freqtrade backtesting \
  --config user_data/config_strategy21.json \
  --strategy Strategy21VATSM \
  --timerange 20230101-20231231 \
  --export trades \
  --export-filename user_data/backtest_results/strategy21_2023.json
```

### 2. æ¨¡æ‹Ÿäº¤æ˜“

åœ¨liveç¯å¢ƒæµ‹è¯•å‰å…ˆè¿è¡Œæ¨¡æ‹Ÿäº¤æ˜“ï¼š

```bash
# å¯åŠ¨æ¨¡æ‹Ÿäº¤æ˜“ï¼ˆdry-runæ¨¡å¼ï¼‰
uv run freqtrade trade \
  --config user_data/config_strategy21.json \
  --strategy Strategy21VATSM \
  --dry-run
```

### 3. å®ç›˜äº¤æ˜“

âš ï¸ **è­¦å‘Š**: å®ç›˜äº¤æ˜“æœ‰èµ„é‡‘æŸå¤±é£é™©ï¼Œè¯·ç¡®ä¿å……åˆ†æµ‹è¯•åå†å¼€å§‹ã€‚

```bash
# å¯åŠ¨å®ç›˜äº¤æ˜“ï¼ˆç¡®ä¿é…ç½®dry_run: falseï¼‰
uv run freqtrade trade \
  --config user_data/config_strategy21.json \
  --strategy Strategy21VATSM
```

### 4. Dockeréƒ¨ç½²

```bash
# æ„å»ºå¹¶å¯åŠ¨æœåŠ¡
docker-compose up -d

# æŸ¥çœ‹è¿è¡ŒçŠ¶æ€
docker-compose ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f freqbot

# åœæ­¢æœåŠ¡
docker-compose down
```

## ç›‘æ§ä¸ç®¡ç†

### ç›‘æ§é¢æ¿

è®¿é—® `http://localhost:8080` æŸ¥çœ‹ç›‘æ§é¢æ¿ï¼š

- **å®æ—¶æŒ‡æ ‡**: VATSMæŒ‡æ ‡çŠ¶æ€
- **äº¤æ˜“æ€§èƒ½**: ç›ˆäºã€èƒœç‡ã€å›æ’¤
- **é£é™©ç›‘æ§**: ä»“ä½åˆ†å¸ƒã€é£é™©å‘Šè­¦
- **ç³»ç»ŸçŠ¶æ€**: è¿è¡Œæ—¶é—´ã€é”™è¯¯æ—¥å¿—

### FreqUIç•Œé¢

FreqUIæä¾›æ›´ä¸°å¯Œçš„äº¤æ˜“ç®¡ç†åŠŸèƒ½ï¼š

```bash
# å¯åŠ¨FreqUI
freqtrade trade --config user_data/config_strategy21.json --freqai-enabled
```

è®¿é—® `http://localhost:8080/trade` ä½¿ç”¨FreqUIã€‚

### å‘½ä»¤è¡Œç®¡ç†

```bash
# æŸ¥çœ‹å½“å‰æŒä»“
freqtrade show-trades --config user_data/config_strategy21.json

# å¼ºåˆ¶å–å‡ºæŸä¸ªäº¤æ˜“å¯¹
freqtrade forcesexit BTC/USDT --config user_data/config_strategy21.json

# æŸ¥çœ‹ç­–ç•¥æ€§èƒ½
freqtrade show-trades --config user_data/config_strategy21.json --print-json

# æ›´æ–°é…ç½®ï¼ˆä¸é‡å¯ï¼‰
freqtrade reload_config --config user_data/config_strategy21.json
```

## ä¼˜åŒ–è°ƒå‚

### å‚æ•°ä¼˜åŒ–æµç¨‹

1. **ç¡®å®šä¼˜åŒ–ç›®æ ‡**
   - æœ€å¤§åŒ–å¹´åŒ–æ”¶ç›Šç‡
   - æœ€å°åŒ–æœ€å¤§å›æ’¤
   - ä¼˜åŒ–å¤æ™®æ¯”ç‡

2. **é€‰æ‹©ä¼˜åŒ–å‚æ•°**
   ```bash
   # è¿è¡Œå‚æ•°ä¼˜åŒ–
   freqtrade hyperopt \
     --config user_data/config_strategy21.json \
     --hyperopt-loss SharpeHyperOptLoss \
     --strategy Strategy21VATSM \
     --epochs 500 \
     --spaces buy sell
   ```

3. **åˆ†æä¼˜åŒ–ç»“æœ**
   ```bash
   # æŸ¥çœ‹ä¼˜åŒ–ç»“æœ
   freqtrade hyperopt-list --config user_data/config_strategy21.json

   # æ˜¾ç¤ºæœ€ä½³å‚æ•°
   freqtrade hyperopt-show --config user_data/config_strategy21.json -n 1
   ```

### æ¨èä¼˜åŒ–å‚æ•°

åŸºäºå†å²å›æµ‹ï¼Œä»¥ä¸‹å‚æ•°é€šå¸¸è¡¨ç°è¾ƒå¥½ï¼š

**ä¿å®ˆé…ç½®**:
```json
{
  "volume_threshold": 2.0,
  "strength_min_score": 0.7,
  "fixed_stop_pct": 0.015
}
```

**ç§¯æé…ç½®**:
```json
{
  "volume_threshold": 1.3,
  "strength_min_score": 0.5,
  "fixed_stop_pct": 0.025
}
```

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**Q1: ç­–ç•¥ä¸äº§ç”Ÿäº¤æ˜“ä¿¡å·**
- æ£€æŸ¥é…ç½®å‚æ•°æ˜¯å¦è¿‡äºä¸¥æ ¼
- éªŒè¯å¸‚åœºæ•°æ®æ˜¯å¦æ­£å¸¸è·å–
- ç¡®è®¤äº¤æ˜“å¯¹åœ¨ç™½åå•ä¸­

**Q2: å†…å­˜ä½¿ç”¨è¿‡é«˜**
```bash
# ä¼˜åŒ–æ•°æ®åº“
sqlite3 user_data/tradesv3.sqlite "VACUUM;"

# æ¸…ç†æ—§æ•°æ®
freqtrade delete-trades --config user_data/config_strategy21.json --days 30
```

**Q3: APIè¿æ¥é”™è¯¯**
- éªŒè¯APIå¯†é’¥é…ç½®
- æ£€æŸ¥ç½‘ç»œè¿æ¥
- ç¡®è®¤äº¤æ˜“æ‰€APIæƒé™

**Q4: DockeræœåŠ¡å¯åŠ¨å¤±è´¥**
```bash
# æŸ¥çœ‹è¯¦ç»†é”™è¯¯ä¿¡æ¯
docker-compose logs freqbot

# é‡å»ºå®¹å™¨
docker-compose down && docker-compose up --build -d
```

### æ—¥å¿—åˆ†æ

```bash
# å®æ—¶æŸ¥çœ‹æ—¥å¿—
tail -f logs/freqtrade.log

# æœç´¢é”™è¯¯æ—¥å¿—
grep -i error logs/freqtrade.log

# åˆ†æäº¤æ˜“æ—¥å¿—
grep "ENTRY\|EXIT" logs/freqtrade.log | tail -20
```

### æ€§èƒ½è°ƒä¼˜

```bash
# æ•°æ®åº“ä¼˜åŒ–
sqlite3 user_data/tradesv3.sqlite "PRAGMA optimize;"

# æ¸…ç†ç¼“å­˜
rm -rf user_data/data/binance/*.json.gz.tmp

# æ›´æ–°pipåŒ…
uv sync --upgrade
```

### ç´§æ€¥åœæ­¢

å¦‚æœéœ€è¦ç´§æ€¥åœæ­¢æ‰€æœ‰äº¤æ˜“ï¼š

```bash
# å‘½ä»¤è¡Œåœæ­¢
pkill -f "freqtrade trade"

# Dockeråœæ­¢
docker-compose down

# å¼ºåˆ¶å–å‡ºæ‰€æœ‰æŒä»“ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰
freqtrade forcesexit --all --config user_data/config_strategy21.json
```

## æœ€ä½³å®è·µ

1. **é£é™©ç®¡ç†**
   - å§‹ç»ˆè®¾ç½®åˆç†çš„æ­¢æŸ
   - æ§åˆ¶å•ç¬”äº¤æ˜“èµ„é‡‘å æ¯”
   - å®šæœŸæ£€æŸ¥å›æ’¤æƒ…å†µ

2. **é…ç½®ç®¡ç†**
   - ä½¿ç”¨ç‰ˆæœ¬æ§åˆ¶ç®¡ç†é…ç½®
   - è®°å½•å‚æ•°ä¿®æ”¹åŸå› 
   - å»ºç«‹é…ç½®æ–‡ä»¶å¤‡ä»½

3. **ç›‘æ§å‘Šè­¦**
   - è®¾ç½®å…³é”®æŒ‡æ ‡å‘Šè­¦
   - å®šæœŸæ£€æŸ¥ç³»ç»Ÿè¿è¡ŒçŠ¶æ€
   - ä¿æŒæ—¥å¿—æ–‡ä»¶æ•´æ´

4. **æŒç»­ä¼˜åŒ–**
   - å®šæœŸå›æµ‹éªŒè¯ç­–ç•¥æœ‰æ•ˆæ€§
   - æ ¹æ®å¸‚åœºå˜åŒ–è°ƒæ•´å‚æ•°
   - å…³æ³¨ç­–ç•¥æ€§èƒ½è¡°é€€

---

æ›´å¤šè¯¦ç»†ä¿¡æ¯è¯·å‚è€ƒï¼š
- [é…ç½®å‚è€ƒ](../configuration/README.md)
- [å¼€å‘æ–‡æ¡£](../development/README.md)  
- [å¸¸è§é—®é¢˜](../faq.md)
```

#### Dockeréƒ¨ç½²é…ç½®

##### Dockerfile

```dockerfile
# å¤šé˜¶æ®µæ„å»ºDockerfile
FROM python:3.11-slim as builder

# å®‰è£…ç³»ç»Ÿä¾èµ–
RUN apt-get update && apt-get install -y \
    build-essential \
    curl \
    git \
    && rm -rf /var/lib/apt/lists/*

# å®‰è£…uvåŒ…ç®¡ç†å™¨
RUN curl -LsSf https://astral.sh/uv/install.sh | sh
ENV PATH="/root/.cargo/bin:$PATH"

# è®¾ç½®å·¥ä½œç›®å½•
WORKDIR /app

# å¤åˆ¶ä¾èµ–æ–‡ä»¶
COPY pyproject.toml uv.lock ./

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒå¹¶å®‰è£…ä¾èµ–
RUN uv sync --frozen --no-dev

# è¿è¡Œæ—¶é˜¶æ®µ
FROM python:3.11-slim as runtime

# å®‰è£…è¿è¡Œæ—¶ä¾èµ–
RUN apt-get update && apt-get install -y \
    sqlite3 \
    curl \
    && rm -rf /var/lib/apt/lists/*

# åˆ›å»ºérootç”¨æˆ·
RUN useradd --create-home --shell /bin/bash freqbot

# è®¾ç½®å·¥ä½œç›®å½•
WORKDIR /app

# ä»builderé˜¶æ®µå¤åˆ¶è™šæ‹Ÿç¯å¢ƒ
COPY --from=builder /app/.venv /app/.venv

# å¤åˆ¶åº”ç”¨ä»£ç 
COPY . .

# è®¾ç½®æƒé™
RUN chown -R freqbot:freqbot /app

# åˆ‡æ¢åˆ°érootç”¨æˆ·
USER freqbot

# è®¾ç½®ç¯å¢ƒå˜é‡
ENV PATH="/app/.venv/bin:$PATH"
ENV PYTHONPATH="/app"

# åˆ›å»ºå¿…è¦çš„ç›®å½•
RUN mkdir -p /app/user_data/{data,logs,backtest_results} \
    && mkdir -p /app/logs

# å¥åº·æ£€æŸ¥
HEALTHCHECK --interval=30s --timeout=10s --start-period=40s --retries=3 \
    CMD curl -f http://localhost:8080/api/v1/ping || exit 1

# æš´éœ²ç«¯å£
EXPOSE 8080 8081

# é»˜è®¤å¯åŠ¨å‘½ä»¤
CMD ["python", "-m", "freqtrade", "trade", \
     "--config", "user_data/config_strategy21.json", \
     "--strategy", "Strategy21VATSM"]
```

##### docker-compose.yml

```yaml
version: '3.8'

services:
  freqbot:
    build: 
      context: .
      dockerfile: Dockerfile
    container_name: freqbot-strategy21
    restart: unless-stopped
    
    environment:
      - EXCHANGE_API_KEY=${EXCHANGE_API_KEY}
      - EXCHANGE_SECRET=${EXCHANGE_SECRET}
      - JWT_SECRET=${JWT_SECRET}
      - API_USERNAME=${API_USERNAME}
      - API_PASSWORD=${API_PASSWORD}
      - TZ=Asia/Shanghai
    
    ports:
      - "8080:8080"  # FreqTrade API
      - "8081:8081"  # ç›‘æ§é¢æ¿
    
    volumes:
      - ./user_data:/app/user_data
      - ./logs:/app/logs
      - freqbot_data:/app/data
    
    networks:
      - freqbot_network
    
    depends_on:
      - redis
      - postgres
    
    # èµ„æºé™åˆ¶
    deploy:
      resources:
        limits:
          memory: 2G
          cpus: '1.0'
        reservations:
          memory: 1G
          cpus: '0.5'
  
  # Redisç¼“å­˜æœåŠ¡
  redis:
    image: redis:7-alpine
    container_name: freqbot-redis
    restart: unless-stopped
    
    ports:
      - "6379:6379"
    
    volumes:
      - redis_data:/data
    
    networks:
      - freqbot_network
    
    command: redis-server --appendonly yes --maxmemory 512mb --maxmemory-policy allkeys-lru
  
  # PostgreSQLæ•°æ®åº“ï¼ˆå¯é€‰ï¼Œé»˜è®¤ä½¿ç”¨SQLiteï¼‰
  postgres:
    image: postgres:15-alpine
    container_name: freqbot-postgres
    restart: unless-stopped
    
    environment:
      - POSTGRES_USER=freqbot
      - POSTGRES_PASSWORD=${DB_PASSWORD:-freqbot123}
      - POSTGRES_DB=freqbot
    
    ports:
      - "5432:5432"
    
    volumes:
      - postgres_data:/var/lib/postgresql/data
      - ./scripts/init-db.sql:/docker-entrypoint-initdb.d/init.sql
    
    networks:
      - freqbot_network
  
  # ç›‘æ§é¢æ¿
  monitoring:
    build:
      context: ./monitoring
      dockerfile: Dockerfile
    container_name: freqbot-monitoring
    restart: unless-stopped
    
    ports:
      - "3000:3000"
    
    environment:
      - FREQBOT_API_URL=http://freqbot:8080
      - REDIS_URL=redis://redis:6379
    
    depends_on:
      - freqbot
      - redis
    
    networks:
      - freqbot_network
  
  # Nginxåå‘ä»£ç†ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
  nginx:
    image: nginx:alpine
    container_name: freqbot-nginx
    restart: unless-stopped
    
    ports:
      - "80:80"
      - "443:443"
    
    volumes:
      - ./nginx/nginx.conf:/etc/nginx/nginx.conf
      - ./nginx/ssl:/etc/nginx/ssl
    
    depends_on:
      - freqbot
      - monitoring
    
    networks:
      - freqbot_network

volumes:
  freqbot_data:
  redis_data:
  postgres_data:

networks:
  freqbot_network:
    driver: bridge
```

##### .env.example

```env
# ===========================================
# FreqBot Strategy21 ç¯å¢ƒé…ç½®
# ===========================================

# äº¤æ˜“æ‰€é…ç½®
EXCHANGE_NAME=binance
EXCHANGE_API_KEY=your_api_key_here
EXCHANGE_SECRET=your_secret_here
EXCHANGE_PASSPHRASE=  # ä»…OKXç­‰éœ€è¦

# äº¤æ˜“é…ç½®
TRADING_MODE=live
DRY_RUN=true
STAKE_CURRENCY=USDT
STAKE_AMOUNT=unlimited
MAX_OPEN_TRADES=5

# æ•°æ®åº“é…ç½®
DB_URL=sqlite:///user_data/tradesv3.sqlite
# æˆ–ä½¿ç”¨PostgreSQL: postgresql://freqbot:password@postgres:5432/freqbot
DB_PASSWORD=freqbot123

# APIå®‰å…¨é…ç½®
JWT_SECRET=your_jwt_secret_here_minimum_32_characters
API_USERNAME=admin
API_PASSWORD=your_secure_password_here

# ç›‘æ§é…ç½®
ENABLE_MONITORING=true
MONITORING_PORT=8081
LOG_LEVEL=INFO

# é£é™©æ§åˆ¶
MAX_DRAWDOWN=0.15
MAX_DAILY_LOSS=0.08
EMERGENCY_SELL_ENABLED=true

# é€šçŸ¥é…ç½®ï¼ˆå¯é€‰ï¼‰
TELEGRAM_ENABLED=false
TELEGRAM_TOKEN=your_telegram_bot_token
TELEGRAM_CHAT_ID=your_chat_id

DISCORD_ENABLED=false
DISCORD_WEBHOOK_URL=your_discord_webhook_url

# æ—¶åŒºè®¾ç½®
TZ=Asia/Shanghai

# å¤‡ä»½é…ç½®
BACKUP_ENABLED=true
BACKUP_INTERVAL_HOURS=24
BACKUP_RETENTION_DAYS=30

# æ€§èƒ½é…ç½®
MAX_MEMORY_USAGE_GB=4
PROCESS_THROTTLE_SECS=5
```

#### è‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬ (scripts/deploy.sh)

```bash
#!/bin/bash

# FreqBot Strategy21 è‡ªåŠ¨éƒ¨ç½²è„šæœ¬
# ä½¿ç”¨æ–¹æ³•: ./scripts/deploy.sh [environment]
# ç¯å¢ƒé€‰é¡¹: development, staging, production

set -e

# é¢œè‰²è¾“å‡º
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
NC='\033[0m' # No Color

# æ—¥å¿—å‡½æ•°
log_info() {
    echo -e "${BLUE}[INFO]${NC} $1"
}

log_success() {
    echo -e "${GREEN}[SUCCESS]${NC} $1"
}

log_warning() {
    echo -e "${YELLOW}[WARNING]${NC} $1"
}

log_error() {
    echo -e "${RED}[ERROR]${NC} $1"
}

# æ£€æŸ¥ä¾èµ–
check_dependencies() {
    log_info "æ£€æŸ¥éƒ¨ç½²ä¾èµ–..."
    
    # æ£€æŸ¥Docker
    if ! command -v docker &> /dev/null; then
        log_error "Docker æœªå®‰è£…ï¼Œè¯·å…ˆå®‰è£… Docker"
        exit 1
    fi
    
    # æ£€æŸ¥Docker Compose
    if ! command -v docker-compose &> /dev/null; then
        log_error "Docker Compose æœªå®‰è£…ï¼Œè¯·å…ˆå®‰è£… Docker Compose"
        exit 1
    fi
    
    # æ£€æŸ¥Git
    if ! command -v git &> /dev/null; then
        log_error "Git æœªå®‰è£…ï¼Œè¯·å…ˆå®‰è£… Git"
        exit 1
    fi
    
    log_success "ä¾èµ–æ£€æŸ¥é€šè¿‡"
}

# ç¯å¢ƒæ£€æŸ¥
check_environment() {
    local env=${1:-development}
    log_info "æ£€æŸ¥éƒ¨ç½²ç¯å¢ƒ: $env"
    
    if [ ! -f ".env" ]; then
        if [ -f ".env.example" ]; then
            log_warning ".env æ–‡ä»¶ä¸å­˜åœ¨ï¼Œæ­£åœ¨ä»ç¤ºä¾‹æ–‡ä»¶åˆ›å»º..."
            cp .env.example .env
            log_warning "è¯·ç¼–è¾‘ .env æ–‡ä»¶å¹¶è®¾ç½®æ­£ç¡®çš„é…ç½®å€¼"
            read -p "æ˜¯å¦ç°åœ¨ç¼–è¾‘ .env æ–‡ä»¶? (y/n): " -n 1 -r
            echo
            if [[ $REPLY =~ ^[Yy]$ ]]; then
                ${EDITOR:-nano} .env
            fi
        else
            log_error ".env.example æ–‡ä»¶ä¸å­˜åœ¨ï¼Œæ— æ³•åˆ›å»ºé…ç½®"
            exit 1
        fi
    fi
    
    # æ£€æŸ¥å…³é”®é…ç½®
    if grep -q "your_api_key_here" .env; then
        log_error "è¯·åœ¨ .env æ–‡ä»¶ä¸­è®¾ç½®æ­£ç¡®çš„ API å¯†é’¥"
        exit 1
    fi
    
    log_success "ç¯å¢ƒæ£€æŸ¥é€šè¿‡"
}

# æ„å»ºé•œåƒ
build_images() {
    log_info "æ„å»º Docker é•œåƒ..."
    
    # æ„å»ºä¸»åº”ç”¨é•œåƒ
    docker-compose build freqbot
    
    # æ„å»ºç›‘æ§é•œåƒï¼ˆå¦‚æœå­˜åœ¨ï¼‰
    if [ -f "monitoring/Dockerfile" ]; then
        docker-compose build monitoring
    fi
    
    log_success "é•œåƒæ„å»ºå®Œæˆ"
}

# æ•°æ®åº“åˆå§‹åŒ–
init_database() {
    log_info "åˆå§‹åŒ–æ•°æ®åº“..."
    
    # åˆ›å»ºæ•°æ®ç›®å½•
    mkdir -p user_data/{data,logs,backtest_results}
    
    # å¦‚æœä½¿ç”¨PostgreSQLï¼Œç­‰å¾…æ•°æ®åº“å¯åŠ¨
    if grep -q "postgresql://" .env 2>/dev/null; then
        log_info "ç­‰å¾… PostgreSQL æ•°æ®åº“å¯åŠ¨..."
        docker-compose up -d postgres
        sleep 10
        
        # æ£€æŸ¥æ•°æ®åº“è¿æ¥
        docker-compose exec -T postgres pg_isready -U freqbot
    fi
    
    log_success "æ•°æ®åº“åˆå§‹åŒ–å®Œæˆ"
}

# è¿è¡Œæµ‹è¯•
run_tests() {
    log_info "è¿è¡Œé›†æˆæµ‹è¯•..."
    
    # åœ¨ä¸´æ—¶å®¹å™¨ä¸­è¿è¡Œæµ‹è¯•
    docker-compose run --rm freqbot python -m pytest tests/ -v --tb=short
    
    if [ $? -eq 0 ]; then
        log_success "æ‰€æœ‰æµ‹è¯•é€šè¿‡"
    else
        log_error "æµ‹è¯•å¤±è´¥ï¼Œéƒ¨ç½²ä¸­æ­¢"
        exit 1
    fi
}

# å¯åŠ¨æœåŠ¡
start_services() {
    log_info "å¯åŠ¨æœåŠ¡..."
    
    # å¯åŠ¨æ‰€æœ‰æœåŠ¡
    docker-compose up -d
    
    # ç­‰å¾…æœåŠ¡å¯åŠ¨
    log_info "ç­‰å¾…æœåŠ¡å¯åŠ¨..."
    sleep 30
    
    # æ£€æŸ¥æœåŠ¡çŠ¶æ€
    if docker-compose ps | grep -q "Exit"; then
        log_error "éƒ¨åˆ†æœåŠ¡å¯åŠ¨å¤±è´¥"
        docker-compose logs
        exit 1
    fi
    
    log_success "æ‰€æœ‰æœåŠ¡å¯åŠ¨æˆåŠŸ"
}

# å¥åº·æ£€æŸ¥
health_check() {
    log_info "æ‰§è¡Œå¥åº·æ£€æŸ¥..."
    
    local max_attempts=30
    local attempt=1
    
    while [ $attempt -le $max_attempts ]; do
        if curl -s -f http://localhost:8080/api/v1/ping > /dev/null; then
            log_success "FreqBot API å¥åº·æ£€æŸ¥é€šè¿‡"
            break
        fi
        
        log_info "ç­‰å¾…æœåŠ¡å¯åŠ¨... ($attempt/$max_attempts)"
        sleep 10
        ((attempt++))
    done
    
    if [ $attempt -gt $max_attempts ]; then
        log_error "å¥åº·æ£€æŸ¥å¤±è´¥ï¼ŒæœåŠ¡å¯èƒ½æœªæ­£å¸¸å¯åŠ¨"
        docker-compose logs freqbot
        exit 1
    fi
}

# éƒ¨ç½²åé…ç½®
post_deploy_config() {
    log_info "æ‰§è¡Œéƒ¨ç½²åé…ç½®..."
    
    # è®¾ç½®å®šæ—¶ä»»åŠ¡ï¼ˆå¤‡ä»½ã€æ—¥å¿—è½®è½¬ç­‰ï¼‰
    if [ "$ENVIRONMENT" = "production" ]; then
        # æ·»åŠ crontabä»»åŠ¡
        (crontab -l 2>/dev/null; echo "0 2 * * * /app/scripts/backup.sh") | crontab -
        (crontab -l 2>/dev/null; echo "0 4 * * 0 /app/scripts/cleanup_logs.sh") | crontab -
    fi
    
    # åˆ›å»ºç›‘æ§å‘Šè­¦ï¼ˆå¦‚æœå¯ç”¨ï¼‰
    if grep -q "ENABLE_MONITORING=true" .env; then
        log_info "è®¾ç½®ç›‘æ§å‘Šè­¦..."
        # è¿™é‡Œå¯ä»¥æ·»åŠ ç›‘æ§å‘Šè­¦çš„é…ç½®é€»è¾‘
    fi
    
    log_success "éƒ¨ç½²åé…ç½®å®Œæˆ"
}

# æ˜¾ç¤ºéƒ¨ç½²ä¿¡æ¯
show_deploy_info() {
    log_success "=== éƒ¨ç½²å®Œæˆ ==="
    echo
    echo "è®¿é—®åœ°å€:"
    echo "  FreqBot API: http://localhost:8080"
    echo "  ç›‘æ§é¢æ¿:   http://localhost:3000"
    echo
    echo "å¸¸ç”¨å‘½ä»¤:"
    echo "  æŸ¥çœ‹æœåŠ¡çŠ¶æ€: docker-compose ps"
    echo "  æŸ¥çœ‹æ—¥å¿—:     docker-compose logs -f freqbot"
    echo "  åœæ­¢æœåŠ¡:     docker-compose down"
    echo "  é‡å¯æœåŠ¡:     docker-compose restart"
    echo
    echo "é…ç½®æ–‡ä»¶:"
    echo "  ä¸»é…ç½®:       user_data/config_strategy21.json"
    echo "  ç­–ç•¥å‚æ•°:     user_data/strategy21_params.json"
    echo "  ç¯å¢ƒå˜é‡:     .env"
    echo
    log_warning "é‡è¦æç¤º:"
    echo "  1. é¦–æ¬¡è¿è¡Œå»ºè®®å…ˆå¯ç”¨ dry_run æ¨¡å¼æµ‹è¯•"
    echo "  2. å®šæœŸå¤‡ä»½é…ç½®å’Œäº¤æ˜“æ•°æ®"
    echo "  3. ç›‘æ§ç³»ç»Ÿè¿è¡ŒçŠ¶æ€å’Œæ€§èƒ½æŒ‡æ ‡"
    echo "  4. å®ç›˜äº¤æ˜“å‰è¯·å……åˆ†æµ‹è¯•"
}

# å›æ»šå‡½æ•°
rollback() {
    log_warning "å¼€å§‹å›æ»šéƒ¨ç½²..."
    
    # åœæ­¢å½“å‰æœåŠ¡
    docker-compose down
    
    # å¦‚æœæœ‰å¤‡ä»½ï¼Œæ¢å¤é…ç½®
    if [ -f "user_data/config_strategy21.json.backup" ]; then
        mv user_data/config_strategy21.json.backup user_data/config_strategy21.json
        log_info "é…ç½®æ–‡ä»¶å·²å›æ»š"
    fi
    
    # æ¢å¤åˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬çš„é•œåƒ
    if [ ! -z "$PREVIOUS_IMAGE_TAG" ]; then
        docker tag freqbot-strategy21:$PREVIOUS_IMAGE_TAG freqbot-strategy21:latest
        log_info "Dockeré•œåƒå·²å›æ»š"
    fi
    
    log_success "å›æ»šå®Œæˆ"
}

# ä¸»å‡½æ•°
main() {
    local environment=${1:-development}
    export ENVIRONMENT=$environment
    
    echo "=================================================="
    echo "    FreqBot Strategy21 è‡ªåŠ¨éƒ¨ç½²è„šæœ¬"
    echo "    ç¯å¢ƒ: $environment"
    echo "    æ—¶é—´: $(date)"
    echo "=================================================="
    
    # è®¾ç½®é”™è¯¯å¤„ç†
    trap 'log_error "éƒ¨ç½²è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯ï¼Œæ‰§è¡Œå›æ»š..."; rollback; exit 1' ERR
    
    # æ‰§è¡Œéƒ¨ç½²æ­¥éª¤
    check_dependencies
    check_environment $environment
    
    # å¤‡ä»½å½“å‰é…ç½®ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
    if [ -f "user_data/config_strategy21.json" ]; then
        cp user_data/config_strategy21.json user_data/config_strategy21.json.backup
        log_info "é…ç½®æ–‡ä»¶å·²å¤‡ä»½"
    fi
    
    build_images
    init_database
    
    # ç”Ÿäº§ç¯å¢ƒéœ€è¦è¿è¡Œæµ‹è¯•
    if [ "$environment" = "production" ]; then
        run_tests
    fi
    
    start_services
    health_check
    post_deploy_config
    show_deploy_info
    
    log_success "éƒ¨ç½²æˆåŠŸå®Œæˆ!"
}

# å¸®åŠ©ä¿¡æ¯
show_help() {
    echo "FreqBot Strategy21 éƒ¨ç½²è„šæœ¬"
    echo
    echo "ç”¨æ³•: $0 [OPTIONS] [ENVIRONMENT]"
    echo
    echo "ç¯å¢ƒé€‰é¡¹:"
    echo "  development  å¼€å‘ç¯å¢ƒï¼ˆé»˜è®¤ï¼‰"
    echo "  staging      æµ‹è¯•ç¯å¢ƒ"
    echo "  production   ç”Ÿäº§ç¯å¢ƒ"
    echo
    echo "é€‰é¡¹:"
    echo "  -h, --help     æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯"
    echo "  --rollback     æ‰§è¡Œå›æ»šæ“ä½œ"
    echo "  --health-check ä»…æ‰§è¡Œå¥åº·æ£€æŸ¥"
    echo
    echo "ç¤ºä¾‹:"
    echo "  $0                    # éƒ¨ç½²åˆ°å¼€å‘ç¯å¢ƒ"
    echo "  $0 production         # éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ"
    echo "  $0 --rollback         # æ‰§è¡Œå›æ»š"
    echo "  $0 --health-check     # å¥åº·æ£€æŸ¥"
}

# è§£æå‘½ä»¤è¡Œå‚æ•°
case "${1:-}" in
    -h|--help)
        show_help
        exit 0
        ;;
    --rollback)
        rollback
        exit 0
        ;;
    --health-check)
        health_check
        exit 0
        ;;
    *)
        main "$@"
        ;;
esac
```

## éªŒæ”¶æ ‡å‡†

### åŠŸèƒ½æµ‹è¯•

1. **æ–‡æ¡£å®Œæ•´æ€§**
   - [ ] ç”¨æˆ·æŒ‡å—è¦†ç›–æ‰€æœ‰ä½¿ç”¨åœºæ™¯
   - [ ] æŠ€æœ¯æ–‡æ¡£æè¿°æ¸…æ™°å‡†ç¡®
   - [ ] APIæ–‡æ¡£ä¸å®é™…æ¥å£ä¸€è‡´
   - [ ] æ•…éšœæ’é™¤æŒ‡å—å®ç”¨æœ‰æ•ˆ

2. **éƒ¨ç½²æ–¹æ¡ˆ**
   - [ ] Dockerå®¹å™¨æ­£å¸¸æ„å»ºå’Œè¿è¡Œ
   - [ ] è‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬æ‰§è¡ŒæˆåŠŸ
   - [ ] ç¯å¢ƒé…ç½®ç®¡ç†å®Œå–„
   - [ ] ç‰ˆæœ¬å‘å¸ƒæµç¨‹é¡ºç•…

3. **è¿ç»´æ”¯æŒ**
   - [ ] ç›‘æ§æŒ‡æ ‡æ–‡æ¡£å‡†ç¡®
   - [ ] å‘Šè­¦å¤„ç†æµç¨‹æ¸…æ™°
   - [ ] å¤‡ä»½æ¢å¤æ–¹æ¡ˆå¯è¡Œ
   - [ ] æ€§èƒ½è°ƒä¼˜æŒ‡å—æœ‰æ•ˆ

### ç”¨æˆ·ä½“éªŒæµ‹è¯•

1. **æ˜“ç”¨æ€§æµ‹è¯•**
   - [ ] æ–°ç”¨æˆ·å¯æŒ‰æ–‡æ¡£å¿«é€Ÿä¸Šæ‰‹
   - [ ] é…ç½®è¿‡ç¨‹ç®€å•æ˜äº†
   - [ ] é”™è¯¯ä¿¡æ¯æç¤ºæ¸…æ¥š
   - [ ] å¸¸è§é—®é¢˜æœ‰è§£å†³æ–¹æ¡ˆ

## å®ç°è®¡åˆ’

### é˜¶æ®µ1ï¼šæ–‡æ¡£ç¼–å†™ (2å°æ—¶)
- åˆ›å»ºç”¨æˆ·æŒ‡å—å’ŒæŠ€æœ¯æ–‡æ¡£
- ç¼–å†™APIæ¥å£æ–‡æ¡£
- å®Œå–„é…ç½®è¯´æ˜æ–‡æ¡£
- æ·»åŠ æ•…éšœæ’é™¤æŒ‡å—

### é˜¶æ®µ2ï¼šDockeréƒ¨ç½²é…ç½® (1.5å°æ—¶)
- åˆ›å»ºDockerfileå’Œdocker-composeé…ç½®
- ç¼–å†™è‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬
- é…ç½®ç¯å¢ƒå˜é‡ç®¡ç†
- è®¾ç½®å¥åº·æ£€æŸ¥æœºåˆ¶

### é˜¶æ®µ3ï¼šè¿ç»´æ–‡æ¡£ (0.5å°æ—¶)
- ç¼–å†™ç›‘æ§è¿ç»´æ–‡æ¡£
- åˆ›å»ºå¤‡ä»½æ¢å¤æ–¹æ¡ˆ
- æ·»åŠ æ€§èƒ½è°ƒä¼˜æŒ‡å—
- å®Œå–„å‘Šè­¦å¤„ç†æµç¨‹

## ä¾èµ–å…³ç³»

- **å‰ç½®ä¾èµ–**: 009 (é›†æˆæµ‹è¯•å¥—ä»¶) - éœ€è¦å®Œæ•´çš„æµ‹è¯•éªŒè¯
- **å¹¶è¡Œæ‰§è¡Œ**: ä¸å¯ä¸å…¶ä»–ä»»åŠ¡å¹¶è¡Œæ‰§è¡Œ
- **åç»­é›†æˆ**: é¡¹ç›®æœ€ç»ˆäº¤ä»˜

## é£é™©ä¸ç¼“è§£

### æŠ€æœ¯é£é™©
1. **Dockerå…¼å®¹æ€§é—®é¢˜**
   - é£é™©ï¼šä¸åŒç¯å¢ƒDockeré…ç½®å·®å¼‚
   - ç¼“è§£ï¼šæä¾›å¤šå¹³å°Dockeré…ç½®ï¼Œè¯¦ç»†ç¯å¢ƒè¦æ±‚

2. **éƒ¨ç½²è„šæœ¬å¤æ‚æ€§**
   - é£é™©ï¼šè‡ªåŠ¨åŒ–è„šæœ¬åœ¨ä¸åŒç¯å¢ƒå¤±è´¥
   - ç¼“è§£ï¼šå……åˆ†æµ‹è¯•ï¼Œæä¾›æ‰‹åŠ¨éƒ¨ç½²å¤‡é€‰æ–¹æ¡ˆ

### ä¸šåŠ¡é£é™©
1. **æ–‡æ¡£ç»´æŠ¤æˆæœ¬**
   - é£é™©ï¼šä»£ç æ›´æ–°åæ–‡æ¡£ä¸åŒæ­¥
   - ç¼“è§£ï¼šå»ºç«‹æ–‡æ¡£æ›´æ–°æ£€æŸ¥æµç¨‹

## æˆåŠŸæŒ‡æ ‡

1. **æ–‡æ¡£å®Œæ•´åº¦** - è¦†ç›–æ‰€æœ‰ä½¿ç”¨åœºæ™¯å’ŒåŠŸèƒ½
2. **éƒ¨ç½²æˆåŠŸç‡** - è‡ªåŠ¨åŒ–éƒ¨ç½²æˆåŠŸç‡ > 95%
3. **ç”¨æˆ·ä¸Šæ‰‹æ—¶é—´** - æ–°ç”¨æˆ·30åˆ†é’Ÿå†…å®Œæˆéƒ¨ç½²
4. **æ•…éšœå¤„ç†æ•ˆç‡** - å¸¸è§é—®é¢˜5åˆ†é’Ÿå†…æ‰¾åˆ°è§£å†³æ–¹æ¡ˆ
5. **è¿ç»´ä¾¿åˆ©æ€§** - è¿ç»´æ“ä½œæ ‡å‡†åŒ–å’Œè‡ªåŠ¨åŒ–

## äº¤ä»˜ç‰©

1. **ç”¨æˆ·æ–‡æ¡£**
   - README.md (é¡¹ç›®ä»‹ç»)
   - docs/user-guide/ (ç”¨æˆ·æŒ‡å—)
   - docs/configuration/ (é…ç½®æ–‡æ¡£)
   - docs/faq.md (å¸¸è§é—®é¢˜)

2. **æŠ€æœ¯æ–‡æ¡£**
   - docs/development/ (å¼€å‘è€…æŒ‡å—)
   - docs/api/ (APIæ¥å£æ–‡æ¡£)
   - docs/architecture/ (æ¶æ„è®¾è®¡æ–‡æ¡£)

3. **éƒ¨ç½²é…ç½®**
   - Dockerfile (å®¹å™¨é…ç½®)
   - docker-compose.yml (æœåŠ¡ç¼–æ’)
   - scripts/deploy.sh (éƒ¨ç½²è„šæœ¬)
   - .env.example (ç¯å¢ƒé…ç½®æ¨¡æ¿)

4. **è¿ç»´æ–‡æ¡£**
   - docs/deployment/ (éƒ¨ç½²æŒ‡å—)
   - docs/monitoring/ (ç›‘æ§è¿ç»´)
   - docs/troubleshooting/ (æ•…éšœæ’é™¤)
   - scripts/backup.sh (å¤‡ä»½è„šæœ¬)